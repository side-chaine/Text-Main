---
description: 
globs: 
alwaysApply: true
---
---
description: Rules for the lyrics-display.js file.
globs: ["js/lyrics-display.js"] # Apply only to lyrics-display.js
alwaysApply: true
---

# Lyrics Display (lyrics-display.js)

- Ensure calculations involving `currentTime`, marker timings, and synchronization are precise. Handle potential edge cases.
- When implementing adaptive font sizing (rehearsal mode), modifications must respect the configured parameters like `baseFontSizeRem`, `minFontSizeRem`, `maxLinesForBase`, and `reductionPerLine`. Font size adjustments should aim to fit content within the container while maintaining readability.
- Modifications to rendering logic (e.g., `_renderBlocksForRehearsal`, `_renderStandardLines`) should ensure smooth visual updates and avoid performance bottlenecks.
- Prioritize performance during real-time display updates.