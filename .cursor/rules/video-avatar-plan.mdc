# üöÄ –ì–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–π –ü–ª–∞–Ω: "Live Avatar"

**–°—Ç–∞—Ç—É—Å:** `–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.`

---

### **üéØ –§–ê–ó–ê 0: –§—É–Ω–¥–∞–º–µ–Ω—Ç –∏ –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞**
- [ ] **0.1. –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫—É —Å–∫—Ä–∏–ø—Ç–æ–≤ MediaPipe –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ –∏—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
- [ ] **0.2. Event Bus:** –°–æ–∑–¥–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å–∏–Ω–≥–ª—Ç–æ–Ω `EventBus` –¥–ª—è –æ–±–º–µ–Ω–∞ —Å–æ–±—ã—Ç–∏—è–º–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏ (`on`, `emit`, `off`).
- [ ] **0.3. –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—ã–µ –∫–ª–∞—Å—Å—ã-–∑–∞–≥–æ—Ç–æ–≤–∫–∏: `js/avatar-studio.js`, `js/avatar-state-machine.js`, `js/karaoke-avatar.js`, `js/carriers/carrier-base.js`.

### **üéØ –§–ê–ó–ê 1: –Ø–¥—Ä–æ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ UI**
- [ ] **1.1. UI –≠–ª–µ–º–µ–Ω—Ç—ã:** –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "Avatar" (`id="avatar-toggle-btn"`) –≤ header –∏ —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã `#static-avatar-container`, `#live-avatar-container`.
- [ ] **1.2. State Machine:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å `AvatarStateMachine` —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ (`static`, `initializing`, `live`, `customizing`, `error`) –∏ –ª–æ–≥–∏–∫–æ–π –≤–∞–ª–∏–¥–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.
- [ ] **1.3. –õ–æ–≥–∏–∫–∞ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è:** –°–≤—è–∑–∞—Ç—å –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "Avatar" —Å `AvatarStateMachine`. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (—á–µ—Ä–µ–∑ `opacity` –∏ `pointer-events`) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
- [ ] **1.4. UX –ú–∏–∫—Ä–æ–∏–Ω—Ç–µ—Ä–∞–∫—Ü–∏–∏:** –î–æ–±–∞–≤–∏—Ç—å CSS-–∞–Ω–∏–º–∞—Ü–∏—é –ª–æ–∞–¥–µ—Ä–∞ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è `initializing` –∏ –ø–ª–∞–≤–Ω—ã–µ fade-–ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

### **üéØ –§–ê–ó–ê 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è "–ñ–∏–≤–æ–≥–æ" –ê–≤–∞—Ç–∞—Ä–∞**
- [ ] **2.1. –ö–ª–∞—Å—Å `AvatarStudio`:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–ª–∞—Å—Å–∞. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ "—Å–ª—É—à–∞—Ç—å" —Å–æ–±—ã—Ç–∏—è –æ—Ç `EventBus`.
- [ ] **2.2. –õ–µ–Ω–∏–≤–∞—è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:** –í `AvatarStudio` —Å–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ `initialize()`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–∞–º–µ—Ä—É –∏ MediaPipe. –í—ã–∑—ã–≤–∞—Ç—å –µ–≥–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `live`.
- [ ] **2.3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫ (Fallbacks):** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (–∫–∞–º–µ—Ä–∞, MediaPipe) —á–µ—Ä–µ–∑ `AvatarStateMachine`, –ø–µ—Ä–µ–≤–æ–¥—è –µ–≥–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `error` –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
- [ ] **2.4. –ü–µ—Ä–µ–Ω–æ—Å –†–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∏–∑ `live-avatar-poc.html` –≤ `AvatarStudio`, —Ä–∞–∑–±–∏–≤ –µ–µ –Ω–∞ –º–∏–∫—Ä–æ-–º–µ—Ç–æ–¥—ã (`drawBackground`, `drawPose`, `drawCarrier`).

### **üéØ –§–ê–ó–ê 3: –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**
- [ ] **3.1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ù–æ—Å–∏—Ç–µ–ª–µ–π:** –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `CarrierBase` –∏ –ø–µ—Ä–≤—ã–π —Ä–µ–∞–ª—å–Ω—ã–π –Ω–æ—Å–∏—Ç–µ–ª—å (`JetPackCarrier`), –Ω–∞—Å–ª–µ–¥—É–µ–º—ã–π –æ—Ç –Ω–µ–≥–æ.
- [ ] **3.2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `userProfile`:** –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ö–µ–º—É –æ–±—ä–µ–∫—Ç–∞ `userProfile` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ `localStorage`.
- [ ] **3.3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `saveAvatarConfig()` –≤ `AvatarStudio`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ `localStorage`.

### **üéØ –§–ê–ó–ê 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –†–µ–∂–∏–º –ö–∞—Ä–∞–æ–∫–µ**
- [ ] **4.1. –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π `KaraokeAvatar`:** –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `KaraokeAvatar`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å –∞–≤–∞—Ç–∞—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥–∞ –∏–∑ `userProfile`.
- [ ] **4.2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ `KaraokeAvatar` —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å –ø–æ–Ω–∏–∂–µ–Ω–Ω—ã–º FPS –∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º `canvas` —Å–ª–æ–µ.
- [ ] **4.3. –§—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –°–æ–∑–¥–∞—Ç—å –≤ `KaraokeAvatar` –º–µ—Ç–æ–¥—ã-–∑–∞–≥–ª—É—à–∫–∏: `moveByHead()`, `moveByKeys()`, `jump()`.

### **üéØ –§–ê–ó–ê 5: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ –ü–æ–ª–∏—Ä–æ–≤–∫–∞**
- [ ] **5.1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Å—Ç–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.
- [ ] **5.2. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:** –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö. 