### Цель
Обновить LooP Learn (бывш. Loop Learning system) с новым «поездом» блоков: занять всю ширину, убрать горизонтальный скролл, улучшить ориентирование по первой строке блока и цвета, гарантировать корректную видимость поверх UI и режимов.

### Что изменилось
- Поезд поверх всех слоёв (портал в body, фикс. позиционирование, высокий z-index)
- Во всю ширину окна (равномерное распределение, без горизонтального скролла)
- Умное сокращение первой строки + тултип с полной строкой, тултип вверх
- Цветовая кодировка вагонов (приглушённые оттенки куплет/припев/бридж)
- Кнопка Loop/Stop в правом нижнем углу блока (не перекрывается поездом)
- Автоцентр активного вагона при смене блока
- Скрытие «поезда» в каталоге; показывается только в режиме репетиции
- Наблюдатели/cleanup: resize/scroll/overlay

### Как тестировать
- Репетиция: «поезд» рисуется сразу, занимает всю ширину, текст обрезается, тултип вверх
- Каталог: «поезд» скрыт; при закрытии каталога появляется
- Смена трека: «поезд» пересобирается по новому набору блоков
- Навигация: клик по вагону переводит к началу блока; активный автоцентрируется
- Loop/Stop: всегда в правом нижнем углу блока

### Скриншоты
См. каталог `Docs/loop-learn/`:
![](Docs/loop-learn/Снимок экрана 2025-08-14 в 13.54.53.png)
![](Docs/loop-learn/Снимок экрана 2025-08-14 в 16.20.14.png)
![](Docs/loop-learn/Снимок экрана 2025-08-14 в 16.20.32.png)
![](Docs/loop-learn/Снимок экрана 2025-08-14 в 16.20.40.png)
![](Docs/loop-learn/Снимок экрана 2025-08-14 в 16.20.49.png)

### Известные моменты
- Небольшой «прыжок» при возврате назад — известен, фикс в работе (< 1 ч.)

### Next steps
- Подсветка вагонов по типу из метаданных
- Сохранение пользовательских границ лупа (IndexedDB, ключ trackId+blockId)
- Микро-анимации/hover без потерь производительности


